<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Kinect | 林克融]]></title>
  <link href="http://sayaku.github.io/blog/categories/kinect/atom.xml" rel="self"/>
  <link href="http://sayaku.github.io/"/>
  <updated>2016-07-01T15:22:10+08:00</updated>
  <id>http://sayaku.github.io/</id>
  <author>
    <name><![CDATA[sayaku]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[AirKinect 簡易手指偵測]]></title>
    <link href="http://sayaku.github.io/blog/2013/01/29/airkinectdetec/"/>
    <updated>2013-01-29T20:26:19+08:00</updated>
    <id>http://sayaku.github.io/blog/2013/01/29/airkinectdetec</id>
    <content type="html"><![CDATA[<iframe class="youtube" width="640" height="360" src="//www.youtube.com/embed/DSHgjOvAFiA?rel=0" frameborder="0" allowfullscreen></iframe>


<!--more-->


<p>為了完成直覺與精準的Kinect操作方式，想要做到手部的細節辨識</p>

<p>由於Kinect與其他webcam的差別就在於它多了一個深度資訊的攝影機</p>

<p>所以其實關於姿勢辨識或是手指辨識的東西還是得靠自己寫!</p>

<p>完全沒有圖學背景的我就開始從網路上找一些手指辨識的資料</p>

<p>認識到OpenCV強大的影像處理類別庫，且大多數手指辨識似乎都是用這套類別庫完成的</p>

<p>於是我也到網路上找了OpenCV在AS3上的應用~找到有個神人寫了OpenCV的ANE</p>

<p>&hellip;.不過&hellip;..是mac only的&hellip;</p>

<p>好吧&hellip;.使用windows os還是得靠自己&hellip;</p>

<p>好好理解關於手指辨識的流程</p>

<p>也試著用as3來實做出來</p>

<p>最後也成功做出一個堪用的版本~</p>

<h3>實作手指偵測的步驟</h3>

<p><strong>1.利用骨架關節定位出右手(或左手)的區域範圍</strong></p>

<p><strong>2.擷取該區域範圍的深度影像來做影像處理，一方面可以減少大範圍的雜訊二方面可以提升辨識效能</strong></p>

<p><strong>3.利用右手座標得到該像素的色彩值並搭配bitmapData.threshold可以保留手部輪廓範圍</strong></p>

<p><strong>4.將得到的手部輪廓再做模糊化，用意是去除雜訊</strong></p>

<p><strong>5.將處理完的輪廓取出輪廓線</strong></p>

<p><strong>6.將輪廓線像素作順時針排列</strong></p>

<p><strong>7.使用K曲率(k-curvature)來作手指偵測</strong></p>

<p>這樣就能做出一個簡單的手指偵測與簡單的Open/Close</p>

<p>雖然還是有些小問題!不過也堪用了!</p>

<p>靜態圖片偵測效果如下圖:</p>

<p><img src="http://pcdn1.rimg.tw/photos/3340521_pezfyhu_l.jpg" alt="手指偵測" /></p>

<p>原始碼在這: <a href="http://dl.dropbox.com/u/68443214/AirKinectFingerDetectionDemo.rar">點我</a></p>

<p>小弟本人程度較差!可能寫了很多冗碼!</p>

<p>所以其實可以優化的地方還很多!請自己做修改!</p>

<p>由上圖可以看到抓指尖同時還會將凹陷處辨認為指尖!</p>

<p>這邊可以用手心與半徑範圍去辨識是指間還是凹陷處!</p>

<h1>How to use?</h1>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='as3'><span class='line'><span class="kd">var</span> <span class="n">kfd</span><span class="p">:</span><span class="kt">KinectFingerDetection</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">KinectFingerDetection</span><span class="o">();&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">kfd</span><span class="o">.</span><span class="na">onFingerDetection</span><span class="o">({&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="err">深度影像</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;},</span> <span class="o">{&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="err">要偵測的手掌關節座標</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;});&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span><span class="err">手掌張開時會觸發的事件</span>
</span><span class='line'><span class="n">kfd</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="n">KinectFingerEvent</span><span class="o">.</span><span class="na">HAND_OPEN</span><span class="o">,</span> <span class="n">onkinectOpen</span><span class="o">);</span>
</span><span class='line'><span class="c1">//手掌握拳時會觸發的事件</span>
</span><span class='line'><span class="n">kfd</span><span class="o">.</span><span class="na">addEventListener</span><span class="o">(</span><span class="n">KinectFingerEvent</span><span class="o">.</span><span class="na">HAND_CLOSE</span><span class="o">,</span> <span class="n">onkinectClose</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></p>
]]></content>
  </entry>
  
</feed>
